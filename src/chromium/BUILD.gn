# Copyright 2019 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/packages/prebuilt_package.gni")
import("//build/packages/prebuilt_test_manifest.gni")

group("chromium") {
  public_deps = [
    ":web_engine",
    ":web_runner",
  ]
}

prebuilt_package("web_engine") {
  package_name = "chromium"
  archive = "//prebuilt/third_party/chromium/arch/$target_cpu/chromium.far"
}

prebuilt_package("web_runner") {
  archive = "//prebuilt/third_party/chromium/arch/$target_cpu/web_runner.far"
}

# Prebuilt FAR tests
test_env = [
  {
    dimensions = {
      device_type = "Intel NUC Kit NUC7i5DNHE"
    }
  },
]

prebuilt_test_manifest("chromium_tests") {
  archive_dir = "//prebuilt/third_party/chromium_tests/arch/x64"
  package_name_prefix = "chromium_tests"
  environments = test_env
}

group("tests") {
  testonly = true

  deps = [
    ":chromium_tests",
    ":web_engine",
    ":web_runner",
    "web_runner_tests:tests",
  ]
}
