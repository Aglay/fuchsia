# Copyright 2018 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/package.gni")

# Targets meant for helping zxdb development. See README.md

# .so Test ---------------------------------------------------------------------

source_set("debug_agent_test_source_set") {
  testonly = true

  sources = [
    "debug_agent_test_so.cc",
    "debug_agent_test_so.h",
  ]
}

loadable_module("debug_agent_test_so") {
  testonly = true

  sources = [
    "debug_agent_test_so.cc",
    "debug_agent_test_so.h",
  ]
}

# Executables ------------------------------------------------------------------

executable("debug_agent_so_test_exe") {
  testonly = true
  output_name = "debug_agent_so_test"

  sources = [
    "debug_agent_so_test_exe.cc",
  ]

  deps = [
    ":debug_agent_test_source_set",
  ]
}

executable("process_spawner") {
  testonly = true
  output_name = "process_spawner"

  sources = [
    "process_spawner.cc",
  ]

  deps = [
    "//garnet/public/lib/fxl",
    "//zircon/public/lib/fdio",
    "//zircon/public/lib/zx",
  ]
}

executable("process_loop") {
  testonly = true
  output_name = "process_loop"

  sources = [
    "process_loop.cc"
  ]

}

# Platform specific test binaries ----------------------------------------------

if (current_cpu == "x64") {
  executable("write_register_test_exe") {
    testonly = true
    output_name = "write_register_test_exe"
    sources = [ "x64_write_register_test_exe.cc" ]
  }
}
