# Copyright 2019 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/package.gni")
import("//build/test.gni")

test("no_network_client") {
  sources = [
    "no_network_test.cc",
  ]

  deps = [
    "//third_party/googletest:gtest_main",
    "//zircon/public/lib/fdio",
  ]
}

# We don't use 'test_package' as it requires 'tests' to be
# defined.
package("test_no_network_client") {
  testonly = true

  deps = [
    ":no_network_client",
  ]

  # Note that we use 'binaries' instead of 'tests' so that CQ
  # won't run this package directly.
  binaries = [
    {
      name = "no_network_client"
      environments = [ qemu_env ]
    },
  ]

  meta = [
    {
      path = rebase_path("meta/test_no_network_client.cmx")
      dest = "test_no_network_client.cmx"
    },
  ]
}
