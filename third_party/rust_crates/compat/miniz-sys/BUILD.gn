# Copyright 2020 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

# C parts of miniz

miniz_crate = "../../vendor/miniz-sys"

config("miniz-config") {
  cflags_c = [
    "-fPIC",
    "-fvisibility=hidden",
  ]
}

static_library("miniz") {
  defines = [
    "MINIZ_NO_STDIO",
    "MINIZ_NO_ARCHIVE_APIS",
    "MINIZ_NO_ARCHIVE_WRITING_APIS",
    "MINIZ_NO_TIME",
    "MINIZ_NO_ZLIB_COMPATIBLE_NAMES",
  ]

  configs = []
  configs += [ ":miniz-config" ]

  sources = [ "$miniz_crate/miniz.c" ]
}
