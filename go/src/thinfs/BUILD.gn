# Copyright 2016 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

action("thinfs") {
  outputs = [ "$target_gen_dir/thinfs" ]

  if (target_cpu == "x64") {
    # TODO(smklein): Delete this conditional (obliterating the 'else' case)
    # once the ARM64 build is fixed.
    script = "scripts/build_fuchsia.py"

    args = [
      "--fuchsia-root",
      rebase_path("//."),
      "--go-binary",
      rebase_path("$root_gen_dir/third_party/go/bin/go"),
    ]

    deps = [
      "//third_party/go:go_runtime",
    ]
  } else {
    script = "scripts/lie_for_arm64_build.py"
  }
}
