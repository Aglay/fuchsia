# Copyright 2019 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("$zx_build/public/gn/config/standard.gni")
import("$zx_build/public/gn/zbi.gni")

assert(current_toolchain != default_toolchain)
assert(current_cpu != "")

# IMPORTANT NOTE!
# No new library should be added to the following targets. If you think you need
# to add one, reach out to pylaligand@ and shayba@ first.
# See http://fxb/36548.

group("ulib") {
  testonly = true
  deps = [
    "$zx/kernel/lib/cmdline",
    "$zx/kernel/lib/counters",
    "$zx/kernel/lib/devicetree",
    "$zx/third_party/ulib",
    "abr",
    "async",
    "async:async-cpp",
    "c",
    "c:crt1",
    "ddk-platform-defs",
    "elf-psabi",
    "elfload",
    "explicit-memory",
    "fidl",
    "fidl:fidl-llcpp",
    "fidl:fidl_base",
    "lazy_init",
    "ldmsg",
    "lockdep",
    "mmio-ptr",
    "mmio-ptr:mmio-ptr-fake",
    "ram-crashlog",
    "region-alloc",
    "runtime",
    "sync",
    "syscalls-headers",
    "vdso-code-header",
    "zbitl",
    "zircon",
    "zircon:zircon-headers",
  ]
}

group("ulib-host") {
  testonly = true
  deps = [
    "$zx/kernel/dev/coresight",
    "$zx/kernel/lib/devicetree",
    "$zx/kernel/lib/heap/cmpctmalloc",
    "$zx/third_party/ulib/boringssl",
    "$zx/third_party/ulib/lz4",
    "$zx/third_party/ulib/safemath",
    "$zx/third_party/ulib/zstd",
    "$zx/third_party/ulib/zstd:zstdseek",
    "async",
    "fidl:fidl",
    "fidl:fidl-llcpp",
    "fidl:fidl_base",
    "zbitl",
    "zircon:zircon-headers",
  ]
  if (current_os == "linux") {
    deps += [ "$zx/third_party/ulib/usbhost:usbhost-static" ]
  }
}
