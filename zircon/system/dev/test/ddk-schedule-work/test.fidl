// Copyright 2019 The Fuchsia Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

library fuchsia.device.schedule.work.test;

using zx;

protocol TestDevice {
    /// Schedules work.
    ScheduleWork() -> () error zx.status;

    /// Spawns a thread which schedules work.
    ScheduleWorkDifferentThread() -> () error zx.status;

    /// Returns whether work ran since last time it was invoked.
    ScheduledWorkRan() -> (bool ran);

    /// Spawns an thread with a dedicated async loop.
    GetChannel(request<OwnedChannelDevice> test) -> () error zx.status;
};

// This is only necessary because it is currently not possible to
// asynchronously reply to a fidl message.
protocol OwnedChannelDevice {
    /// Schedules work and blocks until it completes.
    ScheduleWork() -> () error zx.status;
};

