# Copyright 2017 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("../boringssl.gni")

# See //third_party/boringssl/ssl/CMakeLists.txt
source_set("ssl") {
  visibility = [ "//third_party/boringssl/*" ]
  sources = [
    "bio_ssl.cc",
    "custom_extensions.cc",
    "d1_both.cc",
    "d1_lib.cc",
    "d1_pkt.cc",
    "d1_srtp.cc",
    "dtls_method.cc",
    "dtls_record.cc",
    "handshake.cc",
    "handshake_client.cc",
    "handshake_server.cc",
    "s3_both.cc",
    "s3_lib.cc",
    "s3_pkt.cc",
    "ssl_aead_ctx.cc",
    "ssl_asn1.cc",
    "ssl_buffer.cc",
    "ssl_cert.cc",
    "ssl_cipher.cc",
    "ssl_file.cc",
    "ssl_key_share.cc",
    "ssl_lib.cc",
    "ssl_privkey.cc",
    "ssl_session.cc",
    "ssl_stat.cc",
    "ssl_transcript.cc",
    "ssl_versions.cc",
    "ssl_x509.cc",
    "t1_enc.cc",
    "t1_lib.cc",
    "tls13_both.cc",
    "tls13_client.cc",
    "tls13_enc.cc",
    "tls13_server.cc",
    "tls_method.cc",
    "tls_record.cc",
  ]
  configs += [ "//third_party/boringssl:internal_config" ]
  public_deps = [
    "//third_party/boringssl/crypto",
  ]
}

executable("ssl_test") {
  testonly = true
  sources = [
    "span_test.cc",
    "ssl_test.cc",
  ]
  configs += [ "//third_party/boringssl:test_config" ]
  deps = [
    ":ssl",
    "//third_party/boringssl/crypto/test:gtest_main",
    "//third_party/boringssl/crypto/test:test_support",
  ]
}
