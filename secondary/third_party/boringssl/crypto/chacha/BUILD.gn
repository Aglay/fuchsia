# Copyright 2017 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("../../boringssl.gni")

# See //third_party/boringssl/crypto/chacha/CMakeLists.txt
source_set("chacha") {
  sources = [
    "chacha.c",
  ]
  configs += [ "//third_party/boringssl:internal_config" ]
  if (current_cpu == "arm64") {
    deps = []  # See //build/secondary/third_party/boringssl/BUILD.gn
  } else if (current_cpu == "x64") {
    deps = [
      ":crypto_chacha_asm",
    ]
  }
}

perlasm("crypto_chacha_asm") {
  if (current_cpu == "arm64") {
    sources = [
      "asm/chacha-armv8.pl",
    ]
  } else if (current_cpu == "x64") {
    sources = [
      "asm/chacha-x86_64.pl",
    ]
  }
}
